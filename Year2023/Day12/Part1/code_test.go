package y2023d12p01

import (
	_ "embed"
	"testing"
)

func TestTestCombination(t *testing.T) {
	tests := []struct {
		name       string
		layout     string
		quantities []int
		want       bool
	}{
		{
			name:       "Already fulfilled",
			layout:     "#",
			quantities: []int{1},
			want:       true,
		},
		{
			name:       "two segments",
			layout:     "#.#",
			quantities: []int{1, 1},
			want:       true,
		},
		{
			name:       "multiple lengths",
			layout:     ".###.####.#",
			quantities: []int{3, 4, 1},
			want:       true,
		},
		{
			name:       "invalid",
			layout:     ".###.####.#",
			quantities: []int{4, 3, 1},
			want:       false,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			result := TestCombination(tt.layout, tt.quantities)

			if result != tt.want {
				t.Fatalf("Receieved %t, expected %t", result, tt.want)
			}
		})
	}
}
func TestComputeCombinations(t *testing.T) {
	tests := []struct {
		name       string
		layout     string
		quantities []int
		want       int
	}{
		{
			name:       "Already fulfilled",
			layout:     "#",
			quantities: []int{1},
			want:       1,
		},
		{
			name:       "One to one match",
			layout:     "?",
			quantities: []int{1},
			want:       1,
		},
		{
			name:       "none left to place",
			layout:     "?#",
			quantities: []int{1},
			want:       1,
		},
		{
			name:       "two in one",
			layout:     "???",
			quantities: []int{1, 1},
			want:       1,
		},
		{
			name:       "two in two",
			layout:     "??",
			quantities: []int{1, 1},
			want:       0,
		},
		{
			name:       "could go in either",
			layout:     "???",
			quantities: []int{2},
			want:       2,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			result := ComputeCombinations(tt.layout, tt.quantities)

			if result != tt.want {
				t.Fatalf("Receieved %d, expected %d", result, tt.want)
			}
		})
	}
}

func TestParseRow(t *testing.T) {
	tests := []struct {
		name  string
		input string
		want  int
	}{
		{
			name:  "Row 1",
			input: "???.### 1,1,3",
			want:  1,
		},
		{
			name:  "Row 2",
			input: ".??..??...?##. 1,1,3",
			want:  4,
		},
		{
			name:  "Row 3",
			input: "?#?#?#?#?#?#?#? 1,3,1,6",
			want:  1,
		},
		{
			name:  "Row 4",
			input: "????.#...#... 4,1,1",
			want:  1,
		},
		{
			name:  "Row 5",
			input: "????.######..#####. 1,6,5",
			want:  4,
		},
		{
			name:  "Row 6",
			input: "?###???????? 3,2,1",
			want:  10,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			result := ParseRow(tt.input)

			if result != tt.want {
				t.Fatalf("Receieved %d, expected %d", result, tt.want)
			}
		})
	}
}

func TestCalculateExample(t *testing.T) {
	tests := []struct {
		name  string
		input string
		want  int
	}{
		{
			name:  "Example 1",
			input: "???.### 1,1,3\n.??..??...?##. 1,1,3\n?#?#?#?#?#?#?#? 1,3,1,6\n????.#...#... 4,1,1\n????.######..#####. 1,6,5\n?###???????? 3,2,1",
			want:  21,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			result := Calculate(tt.input)

			if result != tt.want {
				t.Fatalf("Receieved %d, expected %d", result, tt.want)
			}
		})
	}

}
func TestCalculateInput(t *testing.T) {
	tests := []struct {
		name  string
		input string
		want  int
	}{
		{
			name:  "Input",
			input: "??????#??#?? 1,1,5,1\n?#?#??##?#? 2,5,1\n????????.?#???#??##? 2,1,2,1,1,6\n#???#?????.?#?. 2,1,2,1\n?##..?#?#?? 2,4\n..#??##????###????#? 6,8\n???#..?#?? 1,1,2\n.#????#?.??? 3,2\n.?#??##?.? 1,3\n????????#? 2,1,1\n.?##???#?##????.? 7,4,1\n?##??.?#.????? 5,1,4\n?????.#??#?? 1,1,1,1\n?#.???.???.##?#?. 1,1,1,1,5\n.#??.??.???.???. 1,1,2,1,2\n.?.????.??? 1,1,3\n?????#??????????# 6,1,6\n#?????#???? 1,8\n.???.??#?.#????#?.?? 1,1,1,7,1\n.??#????##??#.# 12,1\n?#????##.#.?? 2,4,1,2\n??.??#?#.#? 1,3,2\n??#?.#????#?#? 2,9\n#??#????#????? 4,3,1\n?##????.???? 3,2\n?##??#?.#??#??#??#.? 2,2,10\n??#?#??????#.#?#.? 11,3,1\n??##.???????#??????. 2,1,2,4,2\n????.?#.???#.????.? 1,1,1,4,1,1\n???????????#???.#?? 1,10,2,2\n#???#???????#???? 1,1,7,1\n??.??#?#???.??? 1,5,1,1\n?.?.?#..## 2,2\n??????.?#??#???.? 4,1,4\n???????##?? 3,2\n?????????#?.?#?# 8,1,1\n???????.#???.?#??. 1,1,2,2,1,3\n?#????????????#????? 2,12,2\n..?##??#???.???? 8,3\n#??.?.????#???????? 1,1,2,1,7\n????#?#?##???. 2,6\n??#????....#???? 1,5,2,2\n.?????#?????? 1,5,4\n????..???.???#??##?. 1,1,1,1,1,6\n?.??#?...??? 2,3\n#?#??????##?# 3,2,2,1\n#?##?????????? 10,1\n??#?#?#????#???#??? 13,2\n?#?.??#???#.?? 3,3,2,1\n??????#????????#?? 4,1,5,1\n#?????#.?. 3,2\n??#?#?##?.???? 1,7,1,1\n#?#??#?.##???.???#? 1,5,2,1,4\n?????#???#.#??# 1,1,5,2,1\n.?#?#...??#?#??#?# 1,1,6,3\n???#??#????#?#. 1,9,1\n#????#???.? 1,1,1\n?#?#??#??.#. 1,1,3,1\n..?.???#.????? 1,2,1,2\n.??#???#??????#.??.? 7,4\n.????????? 2,2\n?.??.???.?? 1,1,2\n???.?.???#..??. 1,4\n.?..?.????#???? 1,1,3,2\n??????##??#????.# 1,1,8,1,1\n.?#?.#??.??#?#???#? 3,1,1,9\n??###??#??????#?#?? 1,6,1,1,1,3\n?#??.??#?? 2,1,2\n.???#????#??? 4,1\n??.#?##??? 1,2,1\n?????.???.?#.##?? 4,2,2,2,1\n???#???????#.#???.?? 4,1,1,1,3,1\n?..????#??##?#? 1,8,1\n#???#?##??? 3,1,4\n??.???.?##.?..?#? 3,3,1,2\n????.??????#? 1,1,3,1\n?????#?#?##??. 4,6,1\n.?????????# 2,4\n??.?.?????#?#. 1,7\n.#?#??.??????????? 1,3,7,1\n????##?#?##?? 1,2,4\n??.??????#?#???. 1,2,5\n?#.?#??#????.?? 2,1,1,1,1\n???##?.?.???#..?#?#? 1,2,1,1,1,5\n.??.#??????#?#### 1,1,1,9\n?#?#?.???##????# 1,2,1,3,4\n##?#.#??#?? 4,5\n????..#??. 3,2\n??#????.??##??# 4,1,5\n??.???.#???????????? 2,1,6,1,3\n???#?.?.????#?????? 4,10\n#?????#?????. 1,1,1,5\n.?#??.??#???. 2,6\n?#.?????#??##???. 1,1,2,1,5\n.#?.???????##?.#.. 2,2,3,1\n??#??#??.?#????? 1,1,3,3,1\n#.????.???.??.????# 1,1,1,2,1,5\n??#??.???#?? 5,1,1,1\n?##?????????? 5,1\n??.??#??.?. 4,1\n.?.##????.?.? 1,5,1\n.#.?????????.?????? 1,7,1,2\n?##?..?????#??##?##? 3,12\n#?#?##?#?????#??#??? 1,9,1,1\n????#?##???#? 1,8\n??.?##?????????.? 1,11\n??#???#?#.? 2,2,1\n.????#???.???#?#? 1,5,5\n????.??.##??? 2,4\n?#???.???.#????#?? 1,1,1,1,1,4\n??######?#????????. 8,1,1,1\n????.?????? 2,3\n.???#????? 1,1,1\n??????#?#?#??# 10,1\n#?#????????? 1,6,1\n???.?.?##?#?.????. 1,6,2\n?.??????#.#.. 1,1,3,1\n???.?????#?.? 1,2,2,1\n#..???.?.#?? 1,3,1,3\n?#????.#?????#. 2,2,1,2,1\n..#?????????..??## 1,1,1,1,1,3\n??????????#??#? 1,12\n#?#?.?#??????. 4,1,2,1\n???#????#?#???..?# 9,4,1\n.??????#..?. 1,1,1,1\n?.??#????#? 5,1\n#?.?.??#?#.?? 1,1,3\n?#.????.?? 1,3\n#??#??##?#.?..?? 1,6,1,1,2\n.???#??????.?#?.? 5,1,1,1,1\n.??.?.????? 1,1,2\n..?##?????#????? 5,5\n?..?#??#?????.? 2,4\n???#.#????.# 3,2,1,1\n??.??#.?.???? 2,2\n????????##??.??.? 7,3,2,1\n.???#????????????? 10,2\n.?#??.???.???# 3,2,1,1\n?##???#.?? 2,2,2\n??.??#?.?? 1,4,1\n??#?#.??#? 1,3,3\n?#??????.?????#??.#? 2,2,1,1,4,1\n???????.???.#?.?? 7,2,2,1\n.????????#????###?# 1,4,1,3,1\n????????#??.?#?..#.? 2,6,2,1,1\n?#???.?????#?.????? 2,1,1,3,1,1\n???#??.??.. 4,1\n.????.?.??. 4,1,2\n?????????.#? 1,1,1\n?#??#?####??. 9,1\n???#??????#?.#?#???? 1,1,3,1,3,1\n?#?#???#??#?? 9,1\n????#???.?? 3,2\n..#??##???.#?. 1,4,2\n??.?????.?? 3,2\n?#?..???##??.? 1,7\n?????#??????#????? 13,1,1\n?#??#?##.?.?#???# 1,4,1,2,1\n??..??..???.?## 2,1,2,2\n??#??.???#????????? 1,1,1,1,8,1\n???.?..?#. 3,2\n??#??.#.??.#?????? 2,1,1,1,4\n##??..?#??? 4,3\n?#.?.????.##??#? 1,1,4,2,2\n?#???#?????##??? 2,3,5\n??#?????.#?##??? 6,1,5\n??#?..??????? 3,3,1\n?.?.?????###???. 1,10\n#????###???#???.?#? 1,6,3,1\n?.?#?.???##???##??. 2,10\n???.?.#??# 1,2,1\n..#????##?#??????? 1,9,1\n#?#.????## 1,1,4\n???.??#?.#.. 1,1,1,1\n?#?.#.?#.?????#? 1,1,1,2,3\n?#???.?#????#? 1,1,1,4\n???##?????#????##. 1,14\n?..??#??..#? 4,1\n?????????#??##??. 3,8\n?.?.????????#??. 4,2\n?#??????#???#????#? 3,5,1,6\n?#?#?#?.????#?#??.#? 7,9,1\n?#???????#????.?? 6,1,4,2\n##.??????.??####.? 2,2,6\n##??#...#?? 5,3\n????????.#?#?#??? 1,1,4,5,1\n.??.?#?.???.??#? 2,2,1,3\n???#?#..??#? 5,3\n???#?????.?? 4,1,1\n?????#.?###??????? 6,6,1\n??#???###????#?.?.? 2,8\n??#?..###??##???#?. 2,12\n???????#?#?#?? 5,2\n....?#?.?????###???. 2,1,3\n#?????#?#??#?#????? 2,14\n??####???#??#??.. 12,1\n#?#????#???? 3,6\n???#?..????? 1,1,4\n?.?##????.???# 4,1,3\n?#?##????#???##????? 5,3,5,1\n?.?#?#???##? 1,9\n.?#???.??##? 4,2\n?##?##????.###.?? 8,3,1\n??.??????#.?.? 1,6\n?..?#?????.. 2,1\n.??.????##?#??# 1,9,1\n.???#.#.?.??.. 3,1\n?????#?????.???#.? 4,1,4,1\n???#??#???????#???? 8,5\n??#####???#?????.? 10,1,1\n???#????#??????#?# 4,11\n?????#??#??#??# 1,1,5,1,1\n??##????.?.?.??.? 4,1,1,2\n???.?.?#.?????????#? 1,1,1,1,8\n?#???????.? 4,2,1\n??#??#????#..??????? 10,4,2\n?.??.??.??. 1,1,1\n???.???..#? 1,1,1\n???????????.?##?? 4,2,1,5\n#.?????????#???#???# 1,11,3,1\n???#??.??#? 1,2,3\n.?.?#?????????#?.. 3,9\n??.???#?.????#. 1,2,5\n#??#??.??#?#??? 5,5,1\n.???????#?????? 4,1,1,1,1\n.#????#?????#?? 1,2,2,1,3\n??#?#??.?? 7,1\n??????#?.? 2,3\n????.#??##???.?? 1,1,5,1,2\n.??###????.#?#? 7,3\n????.??????..?. 2,1,1,1,1\n???#?????##?.?.??. 9,1\n???#?#????.?#? 5,1,1\n??????????? 5,1\n?#???.?.???..#??##?? 1,2,1,2,2,3\n.??????.??#?#??? 1,2,6,1\n??#?????#??.. 1,2,1,1\n??#????????##??## 2,10,2\n?#???##???? 2,5,1\n..??.#????.???? 2,1,3,2\n.?##??#??#.?#? 4,1,2,3\n.?#??#????##?.? 6,3,1\n??.#.?###?????? 1,1,4,4\n?.??#.##?##??#?. 3,5,2\n.?.???#.?#??.. 1,1,3\n??.??##.?#. 1,2,2\n??..??##?#. 1,5\n??????????..??? 1,2,3,1\n???#?????.? 5,1\n?????##.??.??? 1,2,2,2\n???.?#??#??? 2,7\n?#.?#???.???#??.?#?. 2,1,1,6,3\n???.???#.?#?????#?. 4,7\n#?##?#?#??#??.? 4,4,2,1\n#????#?###??. 1,8\n????????..#???? 5,1,1,2\n?#???????#.?.#? 6,1,1\n??????#?????.#?.#??? 1,6,1,1,1,1\n.??#?#??.???????? 5,1,1,1,1\n???.?.?#????##?## 1,10\n????##?###?#???#? 10,1,2\n??.##?.???#???#?#? 3,9\n??#??????? 1,1,1\n??????.?##??##?# 1,2,7,1\n.??####?????????# 7,7\n????.#???? 2,3,1\n???#????????? 2,1,1,4\n?.??#???#??##????#? 1,1,5,5,2\n?##????.??.??#?.?. 5,2,2\n????????.?# 1,2,2\n??#???.???## 1,1,3\n..??.##?.#?? 1,3,2\n?????????..#??#???# 3,2,4,2\n?#???????.? 2,2\n#????#????#??????#? 1,1,1,5,1,1\n#????.?#?.## 1,1,1,2\n?#??#???#?# 8,1\n.?##?????.???? 2,1,2\n???????#??#?????##.? 1,1,4,2,2,1\n.?#.?#.?#?#.???? 1,2,4,1\n.?..#???????... 1,7\n??..#??#??#.?#???# 1,1,1,1,4,1\n?#.??????.?#. 1,1,2,1\n?.#??##???.??.#??? 1,2,3,1,1,3\n#???#.???#?.???. 2,1,1,2,1\n?#??#??????#????##?? 5,1,8\n?????#?##???????.?.? 2,12,1\n..?#???##?.?#??#???? 2,4,7\n??.#??##??#??? 1,1,2,4\n???.?#??.???????#? 1,5,1\n?.??????..???.???# 6,3,2\n?#???.?#.? 1,1,1\n.?.?????#?.????## 1,4,2,1,2\n#??#???#.???#?.? 8,1,2,1\n?.??#?#?#???#???? 11,1\n.#..???#??.#? 1,6,1\n.###??#??? 3,4\n??#??????#????#??? 1,8,4,1\n??.??...#?..??..? 1,1,2\n#??#???????#????? 8,4\n?#?.??#????? 2,1,1,2\n?????????..#? 2,1,1,2\n?????#?????#?#????. 3,5,1,1,2\n.#????#????#?? 1,7\n#.#.????????? 1,1,5,1\n???#??#?#?#?#????? 1,2,12\n?#????.??.?## 2,3,1,2\n???#??????..?#. 5,1,1,1\n#???###???.?#?#?.? 1,5,1,5,1\n?.?.?#?????? 1,7\n????#????###.??? 1,2,1,3,1\n?..?##???#?.?.??.?? 7,2\n?#?#??#.?#????.#.? 3,1,1,3,1,1\n.???#?.???#? 2,3\n?###???.?##??. 4,4\n.#??#???#?#?#??#? 5,1,6\n##?##??#??#?????. 13,1\n??#??#?.?? 1,4,2\n#??##?.??# 1,3,3\n??.???.??#???##?? 1,1,8\n?.??????#?????..?? 6,1,2,1\n?#??.??#.??.??#?#? 4,2,1,5\n.???#????# 1,7\n#???????#??#??? 3,1,4,1\n.??##?????...?#.... 7,2\n?.#???#..?.?#?? 2,1,4\n#?????#.?.??# 4,1,1,2\n?#?#????#????#? 9,2\n?????#????.??#?#??? 1,1,1,3,6,1\n.??...???.???? 2,1\n????#?.#??????? 5,3,1\n??????#???????#??# 1,2,3,1,6\n?#??.?#??#??.??? 4,3,1,1,1\n??..????#??#? 1,8\n..#?..?.?. 1,1\n?..#?..?..#???#???? 2,1,1,7\n?#???????? 2,1,3\n?.###????#?##??#.? 11,1\n??????#?.. 3,2\n.????#????#???#?# 2,8,1,1\n?.???.???#.?????#??? 1,1,1,2,9\n##??.????##?.?##?. 4,1,4,3\n???#.??#??????#???? 3,8,1\n?#??#????#.???? 6,2,1,2\n#??#????#??#?? 1,10\n#?????????#????. 1,1,8\n#?.?.#.??????# 2,1,2,3\n?#?#???????#... 8,1\n???.????.?? 1,2\n...???#??# 2,2\n??##.????#? 4,1,1\n.?#??#??????##?? 1,4,6\n??#?????.????? 4,1\n?.#.?????#?? 1,2,1,3\n.##????#??.?#?? 9,3\n?.?#???#??#.?.??.? 1,1,4,1,2\n?...?#?#????? 2,2\n????.#???????? 1,8\n?????#.?.????#??#??? 6,1,1,1,1,1\n??#????.???. 3,1,1,3\n?.???.?.??#?????? 1,1,1,6,1\n#?.?#..?????##?#?#. 1,2,2,8\n??##??..??.?. 3,2,1\n??????.?##.? 3,3\n??????##???????.?? 14,1\n??.??????###??.##??# 1,1,2,4,2,1\n????#???#??? 4,1,1\n#?.#??#?##.??..#???? 2,1,1,2,1,5\n??.##???#??# 1,2,3,1\n??#?#??.???#?#. 2,2,1,2,1\n?#.??????????#?? 2,5,1,1\n??.?.????? 1,1,1\n..#???.???? 4,1\n???????????# 3,1,1\n.???##?#??????.?.?#. 2,9,2\n????#????#???? 5,7\n.??##????.???#?.#??? 8,5,1,1\n?..????????##???#??# 1,1,1,2,10\n.??###?.??# 5,1,1\n???##??.?.??? 7,1\n##????##?#? 4,2,1\n?#?#??#???####????? 3,12,1\n??###??#??.?#. 9,1\n.?##?.??#?#????#?? 3,4,3\n.?#???#???.?.???. 8,1,2\n.?.??#?????#?#???? 1,11,1\n?????#??#?? 3,1,2\n?.??..????.#. 1,2,2,1\n?.????#??????#.#?. 1,1,2,2,3,1\n????.?#??#??.#???#.? 1,1,6,3,1\n.??#?.???????? 3,5,1\n???#????.? 1,1,1\n????#??###???#?##?#. 1,1,2,7,2,1\n..????#?.?.??????? 5,6\n??#??.??.###?#??.?? 3,7\n????????????? 1,6\n#.?##???#?? 1,4,2\n.???????.#?#?#??#?? 2,1,8,1\n..?.#.?##.??? 1,1,2,2\n?????????#.??? 1,7\n?..???#????.#??#??? 4,5\n??..???#????.?# 1,5,2,2\n.???#????#????????? 7,2,1,1,1\n??..???.?#??? 2,1\n.###?????..###?###? 6,7\n?.#.??.???#???# 1,1,3,1,1\n???.?#?????. 2,3,1,1\n.?#..???##????.????. 2,8,1\n???.#..#???? 1,1,2,1\n???#?##?.??#?##.?# 2,4,1,1,2,1\n???#????????#?.??# 1,1,1,3,1,1\n??##.????##??. 3,2,4\n???????#???????###? 12,3\n.???.?.?.?##???#?? 1,1,1,7\n.?#???..?#?? 2,4\n?.????#????## 7,2\n.??.?????..??? 4,1\n????#??????? 1,4,3\n?#?#???.?????????.?? 1,1,6,2\n??????#?#?????#????. 8,6,1\n#??????..????# 5,4\n?#??#?????#??.??##?# 2,9,5\n.?????..??? 4,3\n????????#???? 1,2,3\n????#???#.???####.?? 3,1,3,7,1\n?.???..???#?????.? 1,8\n?#?#?#??????.??#? 2,6,2,3\n?????##.#?. 1,4,1\n.#.??????##?#. 1,1,6,1\n?#?.????##?#??#???? 1,1,1,4,3,1\n??????????..? 3,1,1,1\n#.????##??.??????? 1,1,4,2,1\n?#????.?????#??##?.. 5,3,7\n.??.????#??????# 9,2\n???##??.??#??#.?. 4,3,1,1\n.????#??.? 1,3\n?#??#?????#?##?????? 8,7,1\n?????#??#??#.???#?#? 1,5,2,1,4\n?#?????#?#?##???? 1,9,1\n..???#.???? 2,1,2\n??##?#?#????#.? 6,1,3\n?#???###?.??#?? 8,4\n.##?#?????. 6,2\n.?.??##.???#?????? 3,2\n.??.??#??.????.?? 4,1\n????????..?? 6,1\n.?????#?#?#?? 1,9\n#?.?##?#?#??? 1,7,1\n??#???..?. 3,1\n#??.#??????#???. 3,2,5,1\n??#???..?##?#??.?? 5,4,2\n?...????..????#.??? 4,1\n??????#???#?. 1,8\n???.?????#?#?#?????? 1,1,1,1,2,8\n???.????.??. 2,1,2\n?.?.?????? 1,5\n.?.????#.? 1,3,1\n..?##????#???????## 5,2,2,3\n#?????#??.??.#??? 9,1,1,1\n?.##???.#? 4,2\n?#?.??##?????#.???? 1,1,4,1,1,3\n??????.??#??.#. 1,1,2,1,1\n?##?#??#..????..??# 5,1,1,1,2\n?#?#???#????????. 3,2,5\n??????#???##????? 1,11\n?#.??##??????.????#? 2,9,5\n?##???.?#??.???#? 5,2,4\n#?.?#.??##?..? 2,1,4,1\n?.?????.#??#???? 1,1,1,1,6\n????.??.?## 2,2\n??.#??#????# 5,2\n??#?.???#??#???? 3,5,1\n???..??#?.. 3,1\n??#?.????? 1,1\n##???.??.??#. 5,1,1\n.??????.?#????? 4,2,3\n???????.?????? 3,1,1,3\n.?.?????##??#??.#??? 1,9,1,2\n?????###??? 1,6,1\n????.###?? 2,4\n.?????###??.??????? 7,3\n?.#????#?... 1,2\n?.?#?.???#.?????.?? 1,1,4,4,1\n??????#??. 1,1,2\n.?.???##??? 1,5\n??????????#????? 4,1,3,1\n?##????#?###????? 12,2\n???????#????? 1,1,2,1\n???.#.?????.? 1,4\n..??#???##? 3,2\n??.?????#???????#.# 1,1,3,1,5,1\n??.???..?.???? 2,1\n???###?..?#??. 4,1\n?.???.????? 1,3\n#?#?????..??#..???? 5,1,3,2\n##??.???## 4,1,2\n?????..???.??? 3,2,1\n??#?#????.#?##?#. 4,1,6\n#.??#.##?#??????? 1,1,1,10\n.???##?#?#?????????? 13,2\n????.#..?#??#????.. 1,7\n?##??..??.?? 4,1\n?#?#?????.? 8,1\n.#???????????? 3,6,1\n???#?#????????#? 12,1\n.?#??.####? 2,4\n?#???##?..? 1,2\n?.??.?.?#???????.?# 1,2,1,6,1,2\n??????.?#. 1,1,1\n???.?????????.#. 9,1\n?#?###??#?#?? 10,1\n#.?.?#??#??? 1,1,5,1\n???????????#???##. 1,4,5,3\n?#.???????????? 1,1,4,1\n.????#???.????#?? 7,1\n.??????#????#?? 4,2\n..???????#?.? 1,4,1\n????????## 1,4,2\n??.?.?#??.????##??# 1,1,1,1,1,7\n#?..??#.???????? 2,3,7\n??#?#?#???????? 3,3,1\n?..??.?????#? 1,1,7\n#.??#???????? 1,10\n????..???#??.??? 2,4\n????????????.?#? 1,2,1,1,2\n???#???.?. 1,2,1\n??????????#??? 1,7\n???#?##?????? 6,4\n??##??.??#?#??.?? 3,6\n.?.#?#???..??# 1,3,1,2\n???????#?##??????#? 2,5,6\n?#..????.???#? 1,4,1,2\n.??#?.???#? 4,1,2\n?##????.?#??.??# 6,2,2\n????#?.???.???#??? 2,3,1,2,1,1\n?.?.?###???#.?. 1,5,1\n#?#?.??###?#??? 1,1,8\n???????????? 1,1,5\n??.???#???#? 1,2,1,2\n?#?.?.?#??.???#?? 1,4,5\n.#??????????##??#??? 1,1,10\n???.???.??..?##? 1,1,1,1,3\n??.#????#???#????? 1,2,1,1,6,1\n????????#??????? 3,3,1,1\n#??.#?.???. 2,1,3\n?????????.??#?? 1,5,3\n??#?.?#?#?.????? 1,2,5,2\n.##????##???#? 3,6\n.???????.? 1,3\n??.#..##???.#?#? 1,1,3,1,1\n?.#??#?.?#??# 1,5,4\n??##??.?????#??. 3,7\n#?#?????#?.#??.###?? 4,1,1,2,4\n#?????.????.?##? 3,1,1,1,3\n?#??#???.????? 8,3\n?.?#??#?..?#?# 5,4\n??#?#???#.????.. 9,1\n???#??##?##. 1,9\n.#..?.##????? 1,1,3\n??????..??#? 5,2\n.?.?????##??##??? 1,9,1\n?????.#??#?#??#?.? 2,9\n?????#???#?#?? 4,4\n??#.#????.##????#. 2,3,1,2,1\n??#?#.??.##??#????# 2,1,2,2,1,2\n.?.#?????#??.?????.? 1,3,3,1,2,1\n#????????#?? 1,7\n#?.??????#..?#??#? 2,1,1,1,1,6\n??#.?????#?#?##?. 2,11\n.#????#?.?? 2,2,1\n??????#?.?#.?#???..# 1,4,2,1,1,1\n??##??#.???#. 5,1,1,1\n.?#.?#?#?.?#? 1,4,1\n????#???##?????#?? 1,1,1,9,1\n?.??.????#?#?????? 1,8,3\n???#?#??.? 3,1\n#?.???.??#???##??? 2,8\n?#????#??? 3,2,1\n????.?#?.? 1,2,2\n??##??.???? 3,1\n??????.??.? 2,1,1\n???#?#.??.?..?#.?#? 5,1,1,2,2\n???.#??###??.?#???.. 6,5\n???????#??.?.??? 1,4\n????#?.????????# 5,1,1,1,2\n????#.???#???.?.??.. 4,1,1,2\n??#??#.?##??#.??# 1,1,1,5,3\n?#?.#?#?????### 2,3,1,4\n..#??..?.??.???#.?? 3,3\n...#????#.???#?##?. 1,2,8\n??#.#?#??..?..???? 1,1,5,1,2,1\n??????##???#?? 7,1\n?#??????.#.?#?? 4,1,1,4\n??????.?????????. 2,9\n??????#??????? 3,4,4\n#????#???#???#??? 11,2\n?#?.?#?.??????? 2,2,1,1,1\n?#????#??#???? 2,7\n?#?#????.??? 6,2\n??#??????? 3,1\n?.#?#????###?#????? 1,1,11,1\n?????#??#???##?###? 1,9,3\n??#????.??##? 4,1,3\n???????#???#? 2,6\n??#??#.?.????????? 2,2,1,4,1,1\n.##?????#?.? 2,1,2\n??##.?.????#?????? 2,10\n??##?.??????#?##???? 4,2,5\n.???#????##????. 11,1\n.?##??????#.. 4,3\n##.?#??#????#???? 2,7,5\n????#..?#?##??? 2,1,8\n..##??.?#?###?#??#. 4,1,8\n?.#?.???.???#.?? 1,1,2,2\n.#?#????#?.# 1,1,4,1\n?##??#??#?.###???#. 6,1,3,2\n?#?#.?????????###?? 3,2,1,1,6\n?????#???#???.???##? 2,4,2,1,1,3\n??##???#?.???. 1,6,1,1\n???##.?#????#?????? 1,2,2,3,1,2\n????.#???? 2,3\n???????.##??????#?. 5,2,5\n?###?.???#?? 3,1,2,1\n????????????? 1,6,1\n##????????.???? 2,1,3,1,1\n???#????##?? 6,3\n?.???????.?##? 4,2\n??#??##??##??#??? 6,7\n?####???.?.##??.? 6,3\n???.?#.??#? 1,2,2\n.?.?#????. 1,1,1\n.?#??.#????##??# 1,1,7,1\n???.???#???.?#? 2,1,3,1\n.????.?..?? 4,1\n??#?.#???.?#? 3,4,3\n???#????..??? 1,1,1,3\n???.???#???.?? 1,6\n.#??#???#?????? 2,11\n?......#?..?.????.. 2,3\n?.#??????#?# 1,1,7\n????#?#?#? 1,7\n..####.????? 4,3\n??#???#..?.??????#?? 1,2,8\n?#?????????...??#.?? 2,6,2\n??###??????.#???.??? 5,1,1,3,1\n???#.???????? 4,1,1,1\n?##?????#.?????#??? 9,4\n??#?#???.#?#??##??# 1,1,2,3,2,2\n?.?.#.?#??????## 1,1,2,7\n?????#?##??#.?#?? 8,1,2\n..?.?#????#????#?? 1,1,1,1,5\n????#??#?###????#.?? 1,5,3,2,1,1\n?#?#?#?.#????? 3,1,1,1\n?????????#? 2,4,1\n?#?????.??#?.?# 1,4,1,1,2\n???#???#.???.#??.# 1,2,1,2,3,1\n?..#?##????????? 6,2\n##???.??#????? 5,4,1\n??.?#???????#?#. 1,1,7\n?.??#?.#.?#?? 4,1,3\n.??????.????? 1,2,1,1\n?????#?#?#.?? 5,1,1,2\n.??????????? 1,2\n.????..#??#.? 3,1,1\n??.?#?????#. 2,1,3\n#?.?#.???..???.??#?? 1,1,2,3,4\n?.??#?#..#??#?? 1,1,1,2,1\n#?#????.????? 1,3,1,2\n???##???.#? 3,1,2\n????.???.???#??????# 2,1,1,4,1,3\n?#?.?????##????#? 1,1,1,7\n?.#???#?.. 1,3\n??##???#.?.??? 8,1,1\n??#???#???? 4,2,1\n???.?.?.?..???? 2,1\n??.??#..#?#??#??#?? 1,1,10\n???#??.?????##??#. 1,3,1,7\n????##??..?.??? 4,1\n?.??.#???#.??? 2,5,2\n?.?##????#??. 1,2,5\n???????#?.#?# 4,1,1,1\n????#?#..?#?? 1,1,1\n?????.??.?????#???? 1,2,1,2,7\n#???...??????#??? 2,4,2,1\n#?????#?????????##. 7,3,5\n?..???##????? 1,6\n.#??#????#?#?????? 2,1,8\n..??.???##?##?#.?? 2,10\n??????????????????## 3,2,1,5,1,2\n##???#???? 7,1\n?.?..?#????.. 1,5\n?.?#??????? 1,5,1\n????.?#??#..?#? 3,4,2\n?????#?????.???#?? 2,5,6\n?????###????..???? 7,1,2\n???..???????.. 3,7\n???#..??#?????.. 2,3\n??.???#???? 1,1,1\n.#????#??#??. 9,1\n???????...??##? 6,4\n??????.#??# 5,2,1\n?.?????????????## 2,1,1,2,2\n?????????#? 2,2\n???..?????????? 1,3,2,1\n???#?#???#????? 8,1\n?#???#??.?? 6,1\n?.#???#?.. 1,6\n#?.?#?????##?. 1,8\n?#?#?#??.??.?.?# 6,1,1,1,1\n???????#???###.?? 8,5,1\n??#??#????????#?#?? 7,3,4,1\n??#?????????.?#. 1,5,1,2\n.##???????.?##?? 6,3\n????#..#?#? 4,1,2\n????????????????.? 7,6\n#??#.???.????.???#?. 4,1,1,1,4\n.???#???..???##????? 6,1,3,3\n???#?...???##? 2,5\n.???#.#.#?.?.?#? 3,1,1,1,1\n?.??#??.????# 4,1,1\n###?#??..#.?????? 6,1,1,1,1\n??#?????.????? 6,2\n?????..#??#?. 4,1,1\n#????#?#?##?.??.#?? 2,8,1,2\n.???.?.??#??? 1,4\n?#??#????#?#?#??? 2,1,9\n.??#??####??..??#?.? 10,2\n#???.????? 1,1,1\n??????#????.?..# 1,5,1,1,1\n??.?#.??.??? 1,1,2,1\n?.??..??#?. 2,2\n????##.????. 1,3,4\n?.???#..??#????. 3,5\n.#???.?.#??#????#? 1,1,1,10\n?.???.?#?#??? 1,6\n.???.??.#? 1,1,1\n??#?#???#.??#.?? 7,1,1\n..?.#??#?#??#??? 1,2,1,1,3\n..?#?.#?#? 3,1,1\n?..???????#..##?# 1,1,2,1,4\n.#??.?#??###?#?. 3,9\n??.??#????##???? 1,12\n??????##?#?##???#.? 2,11,1\n????.??##??? 2,1,3\n.??#.????#?? 3,1\n.??#????#???#? 2,5\n.??...?#?.? 2,2,1\n?#??.?.##??#??#.?..? 2,1,8,1\n.##?.???#?????...? 3,6\n?.##????###??#?????? 2,6,3,2\n?#???#??#??????? 10,2\n.????#??##?? 3,1,2\n??#??????. 1,1,1\n?#???.?????#?#??#?? 2,1,10\n#???????#?? 1,2,1\n.????????. 2,1,1\n#????.??##??#??.??? 1,1,1,8,3\n??????#??#???????#? 2,12,1\n.?.??#????.? 4,2\n.?.????.??##??#.? 1,1,4,2,1\n.??#???.##??? 1,4,2,1\n??????###??##???.?# 2,5,2,1\n??????###??#?.#??? 1,1,7,2,1\n.???#???#.???????## 5,1,1,4,2\n?.?#.?####???.?#???? 1,7,5\n#????.????.#??# 1,2,4,2,1\n.??.#??#.#??.? 2,1,1,2\n??#.????#? 1,1,1\n.#.?.?.??? 1,1,2\n??#..?##??. 3,5\n?#????#??.????##..? 7,5\n.???.??.??.??? 2,2,1,1\n?#??.#?#?.?? 3,4\n????#?.???.??.#??# 6,2,2,2,1\n????.??????.??#. 2,3\n##???.?????.#???#. 4,1,1,2,1\n??...#???#???#? 1,2,6\n???.??#?#.?? 2,1,1,1\n?#??#?#????.?? 5,1,3,1\n??#??#????????# 6,1,2\n???????.????..?#.?? 1,3,2,1\n???#?..?????. 4,1\n??.??.????#?#.?#.# 1,1,7,1,1\n?.???#?????##...?# 1,1,1,1,3,2\n???##..??????????#? 3,8\n????.????.#?..#? 4,1,2,1\n#?..#?#?????.?### 1,3,2,3\n???????#??#.?. 1,7\n???#?.??#?#??.#?? 4,4,2\n??#?###?##?#?????#?? 3,3,11\n????#?.??.#??#.? 4,2,4,1\n.#???#.?.#?.#. 3,1,1,1\n?##.???.???????#?? 2,8\n???.??.#???.??. 1,4\n.#..??????#?#?##?? 1,1,2,3,2,1\n?#.?#???.??.?#??? 2,1,1,1,4\n??#??#??#????#.# 1,3,2,2,1\n??#?#?##????#??. 6,5\n????.?????? 3,1,1\n#????##?#??#??#?#?.? 9,2,1,2,1\n?.??#?#???? 1,5,1\n?.?#.??##??# 1,1,7\n.?#????#?#?????#? 5,5,3\n.???#?#??????###. 1,1,1,2,3\n#??##.?.?.?????#?? 5,1,1,1,1,3\n??###?##..#?#??. 6,1,2\n.??.???.#???? 2,3\n??????##?? 1,4\n#?#.#?.#??#?##?????? 1,1,1,1,7,2\n#?###?#?????.??.???? 5,2,1,1,3\n?????##????.??. 1,5,1\n?.?????##??#?. 1,8\n?..??.?##?..?#?#.?? 1,1,3,2,1,1\n##?##?.?.#?##? 6,4\n#?##??.??. 1,3,1\n???##???##??#?.???? 3,6\n??.??????#..????? 1,1,1,4\n????.#?????????? 1,8\n#?.?.##.???#??. 1,2,1\n??????????.????? 1,1,3,1,3\n.??????????.. 2,5\n?#??#?????.?#?#? 2,1,1,5\n???.#?#??????..?.#? 1,1,5,1,1,1\n??????????????.? 1,5\n#?#??.?.?#???. 5,1,2\n??????.???## 3,1,5\n??#??#?#.??#. 7,3\n.##???#.???? 2,3,1,2\n#?#???#?.##?#?.? 4,1,5,1\n.?#????.????#??#. 3,8\n??##?#?.#??#???? 1,2,2,1,5\n?.?#..##?.?? 1,1,2,1\n.?##???..?#? 5,1\n??#??#??.#.? 1,4,1\n##????#.??#?? 2,1,2\n??.??.???#????#.?#.? 1,1,3,2,1,1\n???.?#?##???? 1,1,2,1\n.???#???????#?? 5,1,2\n???.#??##??#??.??#?? 9,4\n.??????#.?#??????. 3,3,2\n???????##?#?##?. 1,1,6,3\n?#.?#??##???##?.. 1,7,3\n.???.#???.?#?#?? 1,1,5\n.?#??????????? 2,4\n.??????????????? 7,1,1\n.#.??#???#??. 1,5,1\n?#.????..#?#.?..#.# 1,4,3,1,1,1\n?????.?#?? 4,1,1\n?.??????#?????????# 1,6,3,1\n.????????.#??????#?# 2,5,2,4\n.?????????????#? 3,4,4\n.##..??.?? 2,1,1\n??#?#????.?#?#??.?? 7,4,2\n??.?.??###.?#? 1,1,5,3\n?#??.#??#??.?#??# 3,1,4,2,2\n????????#?#????#?# 1,3,1,3,2,1\n???#??#??????.??# 1,2,5,1\n#??#??#?#??#?.????. 1,3,1,5,2\n##?#??.??#??#?? 4,2,1\n.#?#??????..#?? 1,1,3,3\n?????.????.? 4,1\n.??????#?? 2,4\n???#??#?#???#?.?# 8,3,1\n.??###.????###.??#.? 4,7,1\n#??#????????#???#??# 2,2,1,1,7,1\n?..?##???#?.?? 4,2\n??????#????.#..? 2,3,1,1,1\n??#?#?#??##?????.??? 11,1\n.?.??????#.?????? 1,3,3,2\n?..#.?.??.??##???#? 1,1,2,7\n?????#.??#.?#??? 2,3,1,1,1\n???##?.#.?.????#???? 1,2,1,1,7,1\n.??#?.???. 1,2,1\n?????#??#.?....?? 5,1,1\n??##??.?#?.????#?##? 1,4,3,1,6\n??.????##?.#??. 1,1,3,1,1\n?????##?.#.#?## 1,5,1,1,2\n?????.?????..?.? 2,1,4,1,1\n?#?#??###??.#?#?? 8,4\n.#????#??#.?????# 3,5,1,1,1\n????##?###?.?#? 1,1,7,1\n??#??#??#????.. 1,4,6\n?#.???.??. 2,1,1\n.?#??##????? 2,7\n#??.##..#?..#?? 3,2,1,3\n???.?#?#??. 2,4\n?.?????#???? 3,2\n???.??#???#??##?#??? 1,13\n?.#?????#?.#? 4,2,1\n#?.???#.????.? 1,2,3\n????.#??.??.?#? 2,1,2,1,2\n????.?.?#?#??#?# 1,1,1,6,1\n..????#?.??? 6,3\n.??????????... 5,3\n.??#????#???.????? 10,1,2\n#?.???#?.??#? 1,4,1,1\n??#???###??.???. 9,1\n#?##.????.#??#?#???# 1,2,3,8,1\n.??#???????#?#??# 1,1,11\n?..??.??????# 1,1,7\n??.?#??..????..??? 1,2,1,1,1,1\n???#??##??????### 1,1,6,3\n?#?????###?#???. 2,8\n?#?#.????#..??? 4,1,2,1\n?.?.?.??#????..#..? 7,1\n????.?#?????. 1,6\n.??#.???????##??#?? 1,2,7\n..????????#?#? 1,2,4\n###?.??.????????.? 4,1,3,2,1,1\n?.?.??#... 1,1,1\n#????#????????? 1,1,3,2,1\n.?????#?.? 2,4\n?#?#??#?#???..#?#??? 11,1,1\n???#?.##??..#??????? 2,3,1,1,4\n.#?##???#?.?.? 1,7\n#???#???.? 1,4,1\n.???..??...?? 2,2,1\n???#???????..?. 5,1,1,1\n???????.?.#??? 5,4\n#.?????.?.#???.?#? 1,1,1,1,3,1\n##??##?#????#????.? 2,5,1,1,2,1\n??.#???#??#???## 1,13\n#?##.??.?#??#? 4,1,1,2\n?#???#?##????? 1,1,6,1\n#?.???#?#??#???#???# 1,1,1,6,1,1\n??#?#???.#?.#????.#? 5,2,2,2,2\n#.#?.?##???.#?? 1,2,4,2\n.???..??#?#? 2,4\n?#????#?????????#? 10,1,2,1\n.??..###???#?#? 2,9\n?.?????#???????? 4,1\n??.???#??.?. 1,5,1\n?????#??.?.?#??? 2,3,4\n??#.?..??#?#?.?? 2,6\n?#?#????#???? 1,1,7\n????###???#? 1,3,2\n??.#?#?????#?#??? 1,14\n?????.?#?????? 2,2,2,3\n#??..#?????#?? 3,5,1\n?#??#?#????.???#?.? 10,3\n#??#.????????????? 4,8\n??##?#??#??# 9,1\n???#???##?#??? 1,3,4\n.?.##?#?????.#? 2,5,1\n?..????#???#??????? 1,5,1,1,1,1\n????..#????? 1,1,1,1\n??##????##?##??## 12,2\n??#?###.?????..? 5,3\n????.???#?? 1,2\n???#?#???.???..#? 9,1,1\n?????#.?#..?.? 2,1,2,1\n??#?#..?#?? 4,1,1\n?.?.#????#?#??????? 1,5\n??????#??.?????? 9,3\n???.????.???#?#. 1,1,1,1,3\n??####???.#???? 1,6,2,1\n?#?.?#?.#. 1,2,1\n?#??#?#???#????#??#? 13,4\n???#???#?#?#??#????? 1,12,1,1\n?.???#??#?#? 1,1,6\n????.??????#. 1,6\n#??..?#?.?. 3,3,1\n?#?###?#.? 1,5,1\n????###???#??????? 1,10,1\n?????.?.?#? 1,1\n????#???#??##???# 2,13\n#??#??#..??..# 2,4,1,1\n??.??.????..??#.? 1,2,1,3,1\n#.???#???.????#???# 1,5,1,1,2,1\n?#????#?#??? 9,1\n????..??#?.???. 1,1,3,1,1\n???#.???#?.? 1,4\n??#??.???????.# 3,1,2,1,1\n.????????????#? 1,9\n?#????.#?.?#??? 2,1,1,2,4\n.?.?????#?..##.? 1,4,2,1\n?#????##.???#? 3,3,1\n??.?.?.???.?###??? 1,1,1,1,5,1\n.???#???????? 1,2,7\n???#.????? 1,1,4\n??.#???????? 1,5\n??.##??#.??? 1,5,1\n???#????#?????????? 12,5\n????.?#?.. 2,3\n##??#?.????#?????.? 2,1,2,2,2\n#..???#???## 1,1,3,2\n????????#?#?? 4,4\n#?????????????. 1,6,4\n??.??##??#??????# 6,4\n????#???????? 5,1,1\n?#.??#...??? 2,1,1\n???#??#?.???. 7,1\n??..?#?.?. 1,1,1\n?.????####????#??? 9,3,1\n?#.???.?#??#????? 1,1,2,7\n.???#.?#?.? 1,2\n#?#?#???????.? 3,8\n?.#????????.?.??.#. 1,7,1,1,1\n???????#????.?#. 10,2\n??.?????#? 1,5",
			want:  6488,
		},
	}

	for _, tt := range tests {
		t.Run(tt.name, func(t *testing.T) {
			result := Calculate(tt.input)

			if result != tt.want {
				t.Fatalf("Receieved %d, expected %d", result, tt.want)
			}
		})
	}

}
